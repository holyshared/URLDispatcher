<script type="text/javascript" src="/depender/build?require=Element.Event,URLDispatcher/URLDispatcher.Handler"></script>
<script type="text/javascript">
(function(doc){

	window.addEventListener('load', function(){

		var testcases = [];
	
		testcases.push({
			title: 'setContext/getContext',
			description : 'setContext and getContext method testcase',
			fn: function(){
				var handler = new URLDispatcher.Handler(function(){
				});
				var context = { foo: 100 };
				handler.setContext(context);

				log ( (handler.getContext() == context) ? 'assert ok' : 'Context is not set.' );
			}
		});
	
		testcases.push({
			title: 'getArg/getArgs',
			description : 'getArg and getArgs method testcase',
			fn: function(){
				var handler = new URLDispatcher.Handler(function(){
				});
				var context = {
					args: {
						foo: 10,
						bar: 11
					}
				};
				handler.setContext(context);

				log ( (handler.getArg('foo') == 10) ? 'assert ok' : 'Foo cannot be acquired.' );
				log ( (handler.getArg('bar') == 11) ? 'assert ok' : 'Bar cannot be acquired.' );

				var args = handler.getArgs('foo', 'bar');
				log ( (args.foo == 10) ? 'assert ok' : 'Foo cannot be acquired.' );
				log ( (args.bar == 11) ? 'assert ok' : 'Bar cannot be acquired.' );

			}
		});

		testcases.push({
			title: 'getParam/getParams',
			description : 'getParam and getParams method testcase',
			fn: function(){
				var handler = new URLDispatcher.Handler(function(){
				});
				var context = {
					params: {
						foo: 10,
						bar: 11
					}
				};
				handler.setContext(context);

				log ( (handler.getParam('foo') == 10) ? 'assert ok' : 'Foo cannot be acquired.' );
				log ( (handler.getParam('bar') == 11) ? 'assert ok' : 'Bar cannot be acquired.' );

				var params = handler.getParams('foo', 'bar');
				log ( (params.foo == 10) ? 'assert ok' : 'Foo cannot be acquired.' );
				log ( (params.bar == 11) ? 'assert ok' : 'Bar cannot be acquired.' );

			}
		});

		testcases.push({
			title: 'Function/Object',
			description : 'Function and Object event handler',
			fn: function(){
				try {
					var h1 = function(context){
					};
					var handler = new URLDispatcher.Handler(h1);
					log ('assert ok');
				} catch(e){
					log ('Failure of function type.');
				}

				try {
					var h2 = {
						execute: function(context){
						}
					};
					var handler = new URLDispatcher.Handler(h2);
					log ('assert ok');
				} catch(e){
					log ('Failure of object type.');
				}

				try {
					var h3 = null;
					var handler = new URLDispatcher.Handler(h3);
					log ('The instance generation has succeeded.');
				} catch(e){
					log ('assert ok');
				}

			}
		});

		makeActions(testcases);

		testcases.each(function(testcase, key){
			$('test-' + key.toString()).fireEvent('click');
		});

	}, false);

}(document));
</script>
